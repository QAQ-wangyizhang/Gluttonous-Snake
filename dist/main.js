!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){const n={inherit:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.construct=t},extend:function(t){var e=function(){t.apply(this,arguments)};return this.inherit(e,t),e},single:function(t){var e,n=function(){if("object"==typeof e)return e;t&&t.apply(this,arguments),e=this};return t&&this.inherit(n,t),n}};function i(t,e,n,i,o){this.x=t,this.y=e,this.w=n,this.h=i,this.viewContent=o||document.createElement("div")}i.prototype.update=function(t,e){this.x=t,this.y=e};const o="move",r="eat",s="die",a=n.single(i),l=n.extend(i),c=n.extend(i),d=n.single(i),u=n.extend(i),h=n.single(),p=n.single(),y=n.single(i),f=new a(100,30,600,600);function v(){}function x(t,e,n,i,o){return t=v.create(e,n,i,o),f.remove(t.x,t.y),f.append(t),t}f.init=function(){this.viewContent.style.position="absolute",this.viewContent.style.width=this.w+"px",this.viewContent.style.height=this.h+"px",this.viewContent.style.left=this.x+"px",this.viewContent.style.top=this.y+"px",this.viewContent.style.backgroundColor="yellow",document.body.appendChild(this.viewContent),this.squareArr=[[],[]];for(let e=0;e<30;e++){this.squareArr[e]=new Array(30);for(let n=0;n<30;n++){if(0==e||29==e||0==n||29==n)var t=v.create("Wall",n,e,"black");else t=v.create("Floor",n,e,"grey");this.squareArr[e][n]=t,document.body.appendChild(t.viewContent)}}},f.remove=function(t,e){const n=this.squareArr[e][t].viewContent;this.squareArr[e][t]=null,document.body.removeChild(n)},f.append=function(t){document.body.appendChild(t.viewContent),this.squareArr[t.y][t.x]=t},v.prototype.init=function(t,e,n){t.viewContent.style.position="absolute",t.viewContent.style.width=t.w+"px",t.viewContent.style.height=t.h+"px",t.viewContent.style.left=20*t.x+100+"px",t.viewContent.style.top=20*t.y+30+"px",t.viewContent.style.backgroundColor=e,t.info=n},v.prototype.Floor=function(t,e,n){const i=new l(t,e,20,20);return this.init(i,n,o),i},v.prototype.Wall=function(t,e,n){const i=new c(t,e,20,20);return this.init(i,n,s),i},v.prototype.SnakeHead=function(t,e,n){const i=new d(t,e,20,20);return i.update(t,e),this.init(i,n,s),i},v.prototype.SnakeBody=function(t,e,n){const i=new u(t,e,20,20);return this.init(i,n,s),i},v.prototype.Food=function(t,e,n){const i=new y(t,e,20,20);return i.update(t,e),this.init(i,n,r),i},v.create=function(t,e,n,i){if(!v.prototype.hasOwnProperty(t))throw"no this type";return v.prototype[t].prototype=new v,new v.prototype[t](e,n,i)};const w={x:1,y:0},b={x:-1,y:0},m={x:0,y:-1},C={x:0,y:1},g=new h;function k(){let t,e,n,i;for(n=!0;n;){t=Math.round(27*Math.random()+1),e=Math.round(27*Math.random()+1),i=!0;for(let n=g.head;n;n=n.next)if(t==n.x&&e==n.y){i=!1;break}i&&(n=!1)}const o=v.create("Food",t,e,"pink");f.remove(t,e),f.append(o)}g.head=null,g.tail=null,g.init=function(){this.head=x(void 0,"SnakeHead",3,1,"red"),this.body1=x(void 0,"SnakeBody",2,1,"green"),this.tail=x(void 0,"SnakeBody",1,1,"green"),this.head.next=this.body1,this.head.last=null,this.body1.next=this.tail,this.body1.last=this.head,this.tail.next=null,this.tail.last=this.body1,this.direction=w},g.getNextSquare=function(){const t=f.squareArr[this.head.y+this.direction.y][this.head.x+this.direction.x];this.collideMethond[t.info](t)},g.collideMethond={move(t,e){const n=v.create("SnakeBody",g.head.x,g.head.y,"green");n.next=g.head.next,n.last=null,n.next.last=n,f.remove(g.head.x,g.head.y),f.append(n);const i=v.create("SnakeHead",t.x,t.y,"red");if(i.next=n,n.last=null,n.last=i,f.remove(t.x,t.y),f.append(i),!e){const t=v.create("Floor",g.tail.x,g.tail.y,"grey");f.remove(g.tail.x,g.tail.y),f.append(t),g.tail=g.tail.last,g.tail.next=null}},eat(t){this.move(t,!0),k(),S.score++},die(){S.over()}};const S=new p;S.timer=null,S.score=0,S.init=function(){f.init(),g.init(),k(),S.bandEvent()},S.bandEvent=function(){document.querySelector("#btn").onclick=function(){S.start()},document.onkeydown=function(t){switch(t.keyCode){case 38:g.direction!==C&&(g.direction=m);break;case 40:g.direction!==m&&(g.direction=C);break;case 37:g.direction!==w&&(g.direction=b);break;case 39:g.direction!==b&&(g.direction=w)}}},S.start=function(){clearInterval(this.timer),this.timer=setInterval(()=>{g.getNextSquare()},200)},S.over=function(){clearInterval(this.timer),alert("您的得分"+this.score);window.confirm("是否要重新开始")&&location.reload()},S.init()}]);